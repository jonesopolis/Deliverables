var IndexViewModel=function(n){this.runSimulation=function(){var t={standardTrucks:[],customTrucks:[],deliveries:[]};n("#truck-list").children("tr").each(function(){var i=n(this).children("td").first().text();i==="Red"||i==="Blue"?t.standardTrucks.push(i):t.customTrucks.push(i)});n("#delivery-list").children("tr").each(function(){var i=n(this).children("td").first().text();t.deliveries.push(i)});n.ajax("/simulation",{data:JSON.stringify(t),contentType:"application/json",type:"POST",success:function(t){n("#main-body").html(t)}})};this.simulationComplete=function(){n.ajax("/complete",{contentType:"application/json",type:"POST",success:function(t){n("#main-body").html(t)}})}},DeliveriesViewModel=function(n){this.addDelivery=function(t){var i=n("<button>",{"class":"btn btn-danger remove-delivery",text:"Remove"});n("#delivery-list").append(n("<tr>").append(n("<td>",{text:t})).append(n("<td>").append(i)));n("#delivery-hours").val("")};n(document).ready(function(){n("#delivery-hours").on("propertychange change click keyup input paste",function(){var i=n(this).val(),t=parseInt(i);n("#add-delivery").prop("disabled",isNaN(t)||t<=0)});n(document).on("click",".remove-delivery",function(){n(this).closest("tr").remove()})})},TrucksViewModel=function(n){var t=function(t){var i=n("<button>",{"class":"btn btn-danger remove-truck",text:"Remove"});n("#truck-list").append(n("<tr>").append(n("<td>",{text:t.name})).append(n("<td>").append(i)))};this.addRedTruck=function(){t({name:"Red"})};this.addBlueTruck=function(){t({name:"Blue"})};this.addCustomTruck=function(n){t({name:n})};n(document).ready(function(){n("#custom-truck-name").on("propertychange change click keyup input paste",function(){var t=!n(this).val().length;n("#add-custom-truck").prop("disabled",t)});n(document).on("click",".remove-truck",function(){n(this).closest("tr").remove()})})},SimulationViewModel=function(n){var t=function(){var t=1+Number(n("#simulation-hour").text());n("#simulation-hour").text(t)},i=function(t){n("#simulation-trucks").empty();n.each(t,function(t,i){var r,u;i.activeDelivery==null?(r="N/A",u="N/A"):(r=i.activeDelivery.trackingNumber,u=i.activeDeliveryHoursLeft);n("#simulation-trucks").append(n("<tr>").append(n("<td>",{text:i.name})).append(n("<td>",{text:r})).append(n("<td>",{text:u})))})},r=function(t){n("#simulation-deliveries").empty();n.each(t,function(t,i){n("#simulation-deliveries").append(n("<tr>").append(n("<td>",{text:i.hoursToComplete})).append(n("<td>",{text:i.trackingNumber==null?"N/A":i.trackingNumber})).append(n("<td>",{text:i.status})))})};this.run=function(){let n=new signalR.HubConnection("/simulationHub");n.on("update",u=>{t(),i(u.trucks),r(u.deliveries),u.complete&&(n.stop(),indexVm.simulationComplete())});n.start()}};